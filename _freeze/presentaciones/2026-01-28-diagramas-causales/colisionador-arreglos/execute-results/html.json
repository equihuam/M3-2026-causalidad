{
  "hash": "960338aae9b098a0cb2410405c0cca23",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Sufriendo con los colisionadores\"\nformat: html\n---\n\n\n::: {.cell}\n\n:::\n\n\n\n**En un DAG (Directed Acyclic Graph), cada tipo de nodo tiene un significado específico que ayuda a interpretar relaciones causales. “Exposure” es la variable de interés que se supone causa un efecto, “Outcome” es el resultado que se estudia, y las demás categorías (Adjusted, Selected, Unobserved, Other) indican cómo se manejan las variables en el análisis.**  \n\n---\n\n## Definiciones clave en un DAG\n\n| Término | Definición | Ejemplo práctico |\n|---------|------------|------------------|\n| **Exposure** | Variable de exposición. Es la la variable que se concibe como causa principal bajo la hipótesis y los objetivos del estudio. Define o forma parte de lo que en algunos contextos se denomina **tratamiento**.  | Fumar cigarrillos. |\n| **Outcome** | Variable de resultado (respuesta). Es el efecto que, de acuerdo con la hipótesis del estudio, resulta de exponer a las unidades experimentales al efecto de la variable de exposición. | Cáncer de pulmón. |\n| **Adjusted** | Variables que se incluyen en el modelo para controlar procesos o siuaciones de confusión de los efectos. Se opta por incluirlos en el modelo estadístico para evitar que afecten la estimación de la exposición sobre el resultado. | Edad y sexo. |\n| **Selected** | Variables que en el contexto del sistema de estudio, representan un sesgo de selección. Dan cuenta de las situaciones en las que la muestra o población está condicionada por los criterios que definen a estas variables y que se concibe, puede distorsionar las relaciones causales. | Solo estudiar pacientes hospitalizados, lo que excluye a quienes no buscan atención médica. |\n| **Unobserved (Latent)** | Variables no medidas, ocultas o latentes que se postula podrían existir e influir en la relación causal, pero que no están disponibles en los datos. | Predisposición genética al cáncer que no se midió en el estudio. |\n\n\n**En un DAG, el *total effect* (efecto total) se refiere al impacto combinado que una variable de exposición tiene sobre un resultado, incluyendo tanto el efecto directo como todos los efectos indirectos que pasan a través de mediadores.** Dicho de otra forma: es la suma del efecto directo y de los efectos transmitidos por las rutas intermedias, todos cobinados.  \n\n---\n\n## Modalidades de estimación de efectos en un estudio\n\n| Tipo de efecto | Definición | Ejemplo práctico |\n|----------------|------------|------------------|\n| **Total effect** | El impacto global de la exposición sobre el resultado, considerando todas las rutas (directas e indirectas). | Fumar → cáncer de pulmón (directo) + fumar → inflamación crónica → cáncer de pulmón (indirecto). |\n| **Direct effect** | El impacto de la exposición sobre el resultado que no pasa por mediadores. | Fumar → daño celular → cáncer de pulmón. |\n| **Indirect effect** | El impacto que se transmite a través de una o más variables mediadoras. | Fumar → inflamación → cáncer de pulmón. |\n\n\n\n## Cómo se interpreta el *total effect*\n- **Incluye todas las rutas causales**: tanto las que van directamente de la exposición al resultado como las que pasan por mediadores.\n- **No se ajusta por mediadores**: si se ajusta por mediadores, se elimina parte del efecto indirecto y se estima solo el efecto directo.\n- **Es útil para preguntas de política pública o intervención**: por ejemplo, si queremos saber el impacto global de dejar de fumar en la incidencia de cáncer, necesitamos el *total effect*.\n\n---\n\n## Ejemplo aplicado\n## Triángulo de confusión básico\n\nUn triángulo de confusión se forma cuando una variable externa afecta tanto al *factor de exposición* como al *resultado*. Esta situación genera sesgo, es decir *altera* la estimación del efecto que nos interesa valorar. Considera la siguiente situación\n\n- Exposición ($X$): Sombra del dosel arbóreo\n- Resultado ($Y$): Crecimiento de plantas del sotobosque\n- Confusor ($C$): Humedad del suelo\n\nImagina que en el proceso que estoy estudiando la humedad influye en:\n\n- la densidad del dosel (más humedad favorece mayor cobertura), y\n- el crecimiento de las plantas (más agua implica mayor crecimiento y vigor).\n\nAhora añadimos los mediadores y colisionadores que consideramos están actuando en el sistema de mi interés.\n\nLa sombra aumenta la acumulación de hojarasca, que a su vez modifica la oferta de nutrientes y por tanto influye en el crecimiento de las plantas.\n\n- Mediador (M): Profundidad de la hojarasca\n\nFinamente considero que tanto la sombra como la humedad son factores que se relacionan con la atracción de herbívoros a las parcelas.\n\n- Colisionador (K): Presencia de herbívoros\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmi_dag <-  dagitty('dag {C [pos=\"0.5, 1\"]\n                         Y [outcome, pos=\"-0.5, 1\"]\n                         K [pos=\"1,  0\"]\n                         X [exposure, pos=\"0, 0\"]\n                         M [pos=\"-1, 0\"]\n                         C -> X\n                         C -> Y \n                         X -> Y\n                         X -> K\n                         C -> K\n                         X -> M\n                         M -> Y  }')\n\nplot(mi_dag)\n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggdag(mi_dag) + theme_dag()\n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\nOtra manera de definir un DAG es recurrir a la forma como se escriben modelos estadísticos en R. Veamos un ejemplo\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Definir el DAG\ndag_ecologia <- dagify(Y ~ X + C + M,  \n                       X ~ C, \n                       M ~ X, \n                       K ~ X + C,\n\n                       coords = list(C = c(0.5, 1),\n                                     X = c(0, 0),\n                                     M = c(-1, 0),\n                                     Y = c(-0.5, 1),\n                                     K = c(1, 0)),\n                       exposure = \"X\",\n                       outcome = \"Y\")\n\n\n# Asignar roles manualmente\nroles <- tibble(\n  name = c(\"X\", \"Y\", \"C\", \"M\", \"K\"),\n  rol = c(\"Exposición\", \"Resultado\", \"Confusor\", \"Mediador\", \"Colisionador\"),\n  control = c(F,F,T,F,F)\n)\n\n# Graficar con colores por rol\ndag_ecologia %>%\n  tidy_dagitty(seed = 3334) %>%\n  left_join(roles, by = \"name\") %>%\n  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +\n  geom_dag_edges() +\n  geom_dag_point(aes(fill = rol), color = \"black\", shape = 21, size = 10) +\n  geom_dag_text(color = \"white\") +\n  scale_fill_manual(values = c(\n    \"Exposición\" = \"steelblue\",\n    \"Resultado\" = \"forestgreen\",\n    \"Confusor\" = \"orange\",\n    \"Mediador\" = \"purple\",\n    \"Colisionador\" = \"red\"\n  )) +\n  theme_dag()\n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndag_ecologia <- control_for(dag_ecologia, var = \"C\")\nggdag_adjust(dag_ecologia)\n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggdag_paths(dag_ecologia, adjust_for = \"C\") \n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggdag_adjustment_set(dag_ecologia, exposure = \"X\", outcome = \"Y\")\n```\n\n::: {.cell-output-display}\n![](colisionador-arreglos_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n:::\n\n\n",
    "supporting": [
      "colisionador-arreglos_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}